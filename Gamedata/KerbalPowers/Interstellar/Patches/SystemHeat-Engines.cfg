@PART[pletelyos]:NEEDS[SystemHeat]
{
	refPowerAScale = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0[1, ]$ // get vac Isp number
	refPowerBScale = #$MODULE[ModuleEnginesFX],1/atmosphereCurve/key,0[1, ]$ // get vac Isp number
	@refPowerAScale /= 17900 // FFT dual-mode Tokamak engine
	@refPowerBScale /= 8000
	
	refPowerA1Scale = #$MODULE[ModuleEnginesFX],0/maxThrust$ // get max thrust number
	refPowerB1Scale = #$MODULE[ModuleEnginesFX],1/maxThrust$ // get max thrust number
	@refPowerA1Scale /= 200
	@refPowerB1Scale /= 400
	
	@refPowerAScale *= #$refPowerA1Scale$
	@refPowerBScale *= #$refPowerB1Scale$
	
	// precision sequence to keep div number at 2dp and not let it be 12+dp
	@refPowerAScale += 0.005
	@refPowerAScale *= 100
	@refPowerAScale = #$refPowerAScale[0,.]$ // regex truncate, unknown behavior but used in RO
	@refPowerAScale /= 100
	@refPowerBScale += 0.005
	@refPowerBScale *= 100
	@refPowerBScale = #$refPowerBScale[0,.]$ 
	@refPowerBScale /= 100
	@MODULE[ModuleEnginesFX],*
	{
		@heatProduction = 0
	}
	MODULE
	{
		name = ModuleSystemHeat
		// Cubic metres
		volume = #$/mass$
		@volume *= 0.667
		moduleID = reactor
		iconName = Icon_Atom
	}
	MODULE
	{
		name = ModuleSystemHeatEngine
		// must be unique
		moduleID = engine1
		// ModuleSystemHeat to link to
		systemHeatModuleID = reactor
		engineModuleID = Dry
		// in KW at peak output
		systemPower = 14000
		@systemPower *= #$/refPowerAScale$

		// Nominal system output temperature
		systemOutletTemperature = 1600
		// Valid system temperature range
		temperatureCurve
		{
			key = 0 1 0 0
			key = 1600 1 0 0
			key = 2000 0 0 0
		}
	}
	MODULE
	{
		name = ModuleSystemHeatEngine
		// must be unique
		moduleID = engine2
		// ModuleSystemHeat to link to
		systemHeatModuleID = reactor
		engineModuleID = Wet
		// in KW at peak output
		systemPower = 7000
		@systemPower *= #$/refPowerBScale$

		// Nominal system output temperature
		systemOutletTemperature = 1600
		// Valid system temperature range
		temperatureCurve
		{
			key = 0 1 0 0
			key = 1600 1 0 0
			key = 2000 0 0 0
		}
	}
}
@PART[pletelyos]:NEEDS[SystemHeat]
{
	!refPower* = nope // cleanup
}